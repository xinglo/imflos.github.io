{"version":3,"file":"get-video-id.esm.js","sources":["../node_modules/get-src/index.js","../src/utils/strip-parameters.js","../src/youtube.js","../src/vimeo.js","../src/vine.js","../src/videopress.js","../src/index.js"],"sourcesContent":["'use strict';\nmodule.exports = function (input) {\n\tif (typeof input !== 'string') {\n\t\tthrow new TypeError('get-src expected a string');\n\t}\n\tvar re = /src=\"(.*?)\"/gm;\n\tvar url = re.exec(input);\n\n\tif (url && url.length >= 2) {\n\t\treturn url[1];\n\t}\n};\n","/**\n * Strip away any parameters following `?` or `/` or '&'\n * @param str\n * @returns {String}\n */\nexport default function stripParameters(str) {\n  // Split parameters or split folder separator\n  if (str.indexOf('?') > -1) {\n    return str.split('?')[0];\n  } if (str.indexOf('/') > -1) {\n    return str.split('/')[0];\n  } if (str.indexOf('&') > -1) {\n    return str.split('&')[0];\n  }\n  return str;\n}\n","import stripParameters from './utils/strip-parameters';\n\n/**\n * Get the Youtube Video id.\n * @param {string} youtubeStr - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function youtube(youtubeStr) {\n  let str = youtubeStr;\n\n  // remove time hash at the end of the string\n  str = str.replace(/#t=.*$/, '');\n\n  // shortcode\n  const shortcode = /youtube:\\/\\/|https?:\\/\\/youtu\\.be\\/|http:\\/\\/y2u\\.be\\//g;\n\n  if (shortcode.test(str)) {\n    const shortcodeid = str.split(shortcode)[1];\n    return stripParameters(shortcodeid);\n  }\n\n  // /v/ or /vi/\n  const inlinev = /\\/v\\/|\\/vi\\//g;\n\n  if (inlinev.test(str)) {\n    const inlineid = str.split(inlinev)[1];\n    return stripParameters(inlineid);\n  }\n\n  // v= or vi=\n  const parameterv = /v=|vi=/g;\n\n  if (parameterv.test(str)) {\n    const arr = str.split(parameterv);\n    return stripParameters(arr[1].split('&')[0]);\n  }\n\n  // v= or vi=\n  const parameterwebp = /\\/an_webp\\//g;\n\n  if (parameterwebp.test(str)) {\n    const webp = str.split(parameterwebp)[1];\n    return stripParameters(webp);\n  }\n\n  // embed\n  const embedreg = /\\/embed\\//g;\n\n  if (embedreg.test(str)) {\n    const embedid = str.split(embedreg)[1];\n    return stripParameters(embedid);\n  }\n\n  // ignore /user/username pattern\n  const usernamereg = /\\/user\\/([a-zA-Z0-9]*)$/g;\n\n  if (usernamereg.test(str)) {\n    return undefined;\n  }\n\n  // user\n  const userreg = /\\/user\\/(?!.*videos)/g;\n\n  if (userreg.test(str)) {\n    const elements = str.split('/');\n    return stripParameters(elements.pop());\n  }\n\n  // attribution_link\n  const attrreg = /\\/attribution_link\\?.*v%3D([^%&]*)(%26|&|$)/;\n\n  if (attrreg.test(str)) {\n    return stripParameters(str.match(attrreg)[1]);\n  }\n\n  return undefined;\n}\n","/**\n * Get the vimeo id.\n * @param {string} vimeoStr - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function vimeo(vimeoStr) {\n  let str = vimeoStr;\n\n  if (str.indexOf('#') > -1) {\n    [str] = str.split('#');\n  }\n\n  if (str.indexOf('?') > -1 && str.indexOf('clip_id=') === -1) {\n    [str] = str.split('?');\n  }\n\n  let id;\n  let arr;\n\n  const primary = /https?:\\/\\/vimeo\\.com\\/([0-9]+)/;\n\n  const matches = primary.exec(str);\n  if (matches && matches[1]) {\n    return matches[1];\n  }\n\n  const vimeoPipe = [\n    'https?://player.vimeo.com/video/[0-9]+$',\n    'https?://vimeo.com/channels',\n    'groups',\n    'album',\n  ].join('|');\n\n  const vimeoRegex = new RegExp(vimeoPipe, 'gim');\n\n  if (vimeoRegex.test(str)) {\n    arr = str.split('/');\n    if (arr && arr.length) {\n      id = arr.pop();\n    }\n  } else if (/clip_id=/gim.test(str)) {\n    arr = str.split('clip_id=');\n    if (arr && arr.length) {\n      [id] = arr[1].split('&');\n    }\n  }\n\n  return id;\n}\n","/**\n * Get the vine id.\n * @param {string} str - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function vine(str) {\n  const regex = /https:\\/\\/vine\\.co\\/v\\/([a-zA-Z0-9]*)\\/?/;\n  const matches = regex.exec(str);\n  return matches && matches[1];\n}\n","/**\n * Get the VideoPress id.\n * @param {string} str - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function videopress(str) {\n  let idRegex;\n\n  if (str.indexOf('embed') > -1) {\n    idRegex = /embed\\/(\\w{8})/;\n    return str.match(idRegex)[1];\n  }\n\n  idRegex = /\\/v\\/(\\w{8})/;\n\n  const match = str.match(idRegex);\n\n  if (match && match.length > 0) {\n    return str.match(idRegex)[1];\n  }\n\n  return undefined;\n}\n","import getSrc from 'get-src';\nimport youtube from './youtube';\nimport vimeo from './vimeo';\nimport vine from './vine';\nimport videopress from './videopress';\n\n/**\n * Get the id and service from a video url.\n * @param {String} videoStr - the url from which you want to extract the id\n * @returns {Object}\n */\nfunction getVideoId(videoStr) {\n  if (typeof videoStr !== 'string') {\n    throw new TypeError('get-video-id expects a string');\n  }\n\n  let str = videoStr;\n\n  if (/<iframe/gi.test(str)) {\n    str = getSrc(str);\n  }\n\n  // remove surrounding whitespaces or linefeeds\n  str = str.trim();\n\n  // remove the '-nocookie' flag from youtube urls\n  str = str.replace('-nocookie', '');\n\n  // remove any leading `www.`\n  str = str.replace('/www.', '/');\n\n  let metadata = {\n    id: null,\n    service: null,\n  };\n\n  // Try to handle google redirection uri\n  if (/\\/\\/google/.test(str)) {\n    // Find the redirection uri\n    const matches = str.match(/url=([^&]+)&/);\n\n    // Decode the found uri and replace current url string - continue with final link\n    if (matches) {\n      // JavaScript can get encoded URI\n      str = decodeURIComponent(matches[1]);\n    }\n  }\n\n  if (/youtube|youtu\\.be|y2u\\.be|i.ytimg\\./.test(str)) {\n    metadata = {\n      id: youtube(str),\n      service: 'youtube',\n    };\n  } else if (/vimeo/.test(str)) {\n    metadata = {\n      id: vimeo(str),\n      service: 'vimeo',\n    };\n  } else if (/vine/.test(str)) {\n    metadata = {\n      id: vine(str),\n      service: 'vine',\n    };\n  } else if (/videopress/.test(str)) {\n    metadata = {\n      id: videopress(str),\n      service: 'videopress',\n    };\n  }\n  return metadata;\n}\n\nexport default getVideoId;\n"],"names":["stripParameters","str","indexOf","split","youtube","youtubeStr","replace","shortcode","test","shortcodeid","inlinev","inlineid","parameterv","arr","parameterwebp","webp","embedreg","embedid","usernamereg","undefined","userreg","elements","pop","attrreg","match","vimeo","vimeoStr","id","primary","matches","exec","vimeoPipe","join","vimeoRegex","RegExp","length","vine","regex","videopress","idRegex","getVideoId","videoStr","TypeError","getSrc","trim","metadata","service","decodeURIComponent"],"mappings":"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"}